# My understanding of the protocol 
## Protocol notes
- Tokenized vault with a 1 mill of DVT tokens. Offering flashloans for free for the grace period.
    - Grace period is how long the flashloan giveaway is running for. 
- Starting with 10 DVT, HALT THE FLASHLOAN PROCESS. Stopping the whole process. 

## The protocol code. 
**Protocol entry: flashLoan()**
- Function args: FlashBorrower Receiver, address token, amount, bytes calldata data
    - FlashBorrower Receiver is a contract that has inherited and exercises the FlashBorrower interface plus its own actions. 
    - Address token - The token that the vault manages
    - There is data that is sent back as Keccak that we use to compare to effectively communicate the loan has been paid back and fee included. 
    - Function is external and can only be called by another contract.
- Check, Engagement and Interaction
- Checks
    amount shouldn't be 0 - There is no way to harm this. And since it is a uint, the amount can't be negative.
    token that is being passed is what they manage and what they can give the loan of DVT tokens

- Engagement 
    totalAsset is declared as balanceBefore at the time of calling the function. 
    *Converting the totalSupply of the flashLoan into shares should be equal to the balanceBefore inorder to check*
        This is an explicit check that is dangerous.
        The challenge is the vault can receive tokens that are unaccounted for making it uneven and thus always reading as invalid balance. 
        totalAsset won't equal totalSupply of the flashLoan.
    safetransfer of the token to receiver
    fee calculation
        Flashfee takes:
            token address to ensure that what they manage is what is requested
            amount to calculate the fee from. 
    Initiate the callback function and compare it to the calldata we get back. 
    safeTransferFrom - from (address(receiver)) to this contract an amount+fee




